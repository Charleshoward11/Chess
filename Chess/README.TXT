The program crashes if a King gets captured, but that's actually perfectly acceptable.

To avoid making one of the Rook's ordinary moves unavailable,
the player should only be able to castle by dragging the King.

I'm starting to think that I might not be able to have checkmate/stalemate indications in the move previews.
It creates a recursive mess.

THERE'S AN ISSUE WITH THE CASTLING. IT THINKS THE PIECES STAY IN THEIR SPOTS. ALSO, A NULLPOINTEREXCEPTION.